{% extends "base.html" %}

{% block content %}
{% load static %} 
    <link rel="stylesheet" href="{% static 'css/aos.css' %}">
    <script src="{% static 'js/aos.js' %}"></script>

    <script>
      AOS.init();
    </script>

    <form action="" method="POST">

	<button id="filter-btn" class="btn btn-info" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasWithBothOptions" aria-controls="offcanvasWithBothOptions">Filter Product</button>

    <button id="filter-btn" type="submit" class="btn btn-danger" type="button" name="reset">Reset</button>

	<div class="offcanvas offcanvas-start" data-bs-scroll="true" tabindex="-1" id="offcanvasWithBothOptions" aria-labelledby="offcanvasWithBothOptionsLabel">
	  <div class="offcanvas-header">
	    <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel">Product Filter</h5>
	    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
	  </div>
	  <div class="offcanvas-body">

	    {% load crispy_forms_tags %}
		{% crispy form %}

	  </div>
	</div>

    </form>

<section style="background-color: #eee; width=80%;">
  <div class="container py-6" id="prod-container">
    <div class="row">
      {% for prod in product_data %}
        <div class="col-md-6 col-lg-3 mb-4 mb-lg-6">
          <div data-aos="flip-down">
            <a href="{{ prod.link }}">
            <div class="card" id="prod-card">
              <div class="d-flex">
                {% if prod.onsale %}
                <div class="bg-danger rounded-circle d-flex align-items-center justify-content-center shadow-1-strong" id="sale-tag">
                  <p class="text-white mb-0 small">{{ prod.onsale }}</p>
                </div>
                {% else %}
                <p id="sale-tag"></p>
                {% endif %}
              </div>
              <img src="/media/{{ prod.im }}" class="card-img-top" alt="{{ prod.title }}">
              <div class="card-body">
                <div class="d-flex justify-content-between">
                  <p class="mb-0">{{ prod.instock }}</p>
                  <p class="small text-danger"><s>{{ prod.ogprice }}</s></p>
                </div>

                <div class="d-flex justify-content-between mb-3">
                  <h5 class="mb-0">{{ prod.title }} {% if prod.recommend %}<br><span id="recommend-tag">{{ prod.recommend }}</span>{% else %}<br><br>{% endif %}</h5>
                  <h5 class="text-dark mb-0">{{ prod.price }}à¸¿</h5>
                </div>

                <div class="d-flex justify-content-between mb-2">
                  <p class="text-muted mb-0">Available: <span class="fw-bold">{{ prod.available }}</span></p>
                  <div class="ms-auto text-warning">
                    {{ prod.star }}
                  </div>
                  <p> {{ prod.star_num }} </p>
                </div>
              </div>
            </div>
            </a>
          </div>
        </div>
      {% empty %}
      <div class="col-md-12 col-lg-4 mb-4 mb-lg-0">
        <h1>Sorry, there's no requested product..</h1>
        <img src="{% static 'img/noimage.png' %}" style="width: 30vw; margin-bottom: 7rem;">
      </div>
      {% endfor %}
      {% if product_data %}
      <h3 style="margin-top: 2rem; margin-bottom: 7rem; margin-left: 60vw; width: 30vw;"><a href="#top">Jump to top of page</a></h3>
      {% endif %}
    </div>
  </div>
</section>

{% endblock %}
